const Canvas=require("canvas"),hex2rgb=require("./lib/hex2rgb"),hex2str=require("./lib/rgb2str"),colors=require("./lib/colors.json"),Scolor=require("./lib/strife-colors.json");module.exports=(config={})=>{if(null==config)throw new Error("Syntax error");const CCFG={},ADDED={M:!1,E:!1,O:!1,A:!1,AD:!1,S:!1};CCFG.width=300,CCFG.height=35,null==config.name?config.name={value:"<No name>",color:colors.f,bullet:0}:(null==config.name.value&&(config.name.value="Any weapon"),null==config.name.color&&(config.name.color=colors.f),null==config.name.bullet&&(config.name.bullet=0)),null==config.Mod?config.Mod=!1:(null==config.Mod.Lv&&(config.Mod.Lv=1),null==config.Mod.name&&(config.Mod.name="Any mod"),CCFG.height=CCFG.height+32),null==config.Ench?config.Ench=!1:(config.Mod||ADDED.M||(CCFG.height=CCFG.height+32,ADDED.M=!0),null==config.Ench.Lv&&(config.Ench.Lv=1),null==config.Ench.name&&(config.Ench.name="Any ench"),CCFG.height=CCFG.height+24),null==config.OE?config.OE=!1:(config.Mod||ADDED.M||(CCFG.height=CCFG.height+32,ADDED.M=!0),config.Ench||ADDED.E||(CCFG.height=CCFG.height+24,ADDED.E=!0),null==config.OE.Lv&&(config.OE.Lv=1),null==config.OE.name&&(config.OE.name="Any ench"),CCFG.height=CCFG.height+24),null==config.AE?config.AE=!1:(config.Mod||ADDED.M||(CCFG.height=CCFG.height+32,ADDED.M=!0),config.Ench||ADDED.E||(CCFG.height=CCFG.height+24,ADDED.E=!0),config.OE||ADDED.O||(CCFG.height=CCFG.height+24,ADDED.O=!0),null==config.AE.Lv&&(config.AE.Lv=1),null==config.AE.name&&(config.AE.name="Any AE"),CCFG.height=CCFG.height+24),null==config.Addon?config.Addon=!1:(config.Mod||ADDED.M||(CCFG.height=CCFG.height+32,ADDED.M=!0),config.Ench||ADDED.E||(CCFG.height=CCFG.height+24,ADDED.E=!0),config.OE||ADDED.O||(CCFG.height=CCFG.height+24,ADDED.O=!0),config.AE||ADDED.A||(CCFG.height=CCFG.height+24,ADDED.A=!0),null==config.Addon.Lv&&(config.Addon.Lv=1),null==config.Addon.name&&(config.Addon.name="Addon"),CCFG.height=CCFG.height+24),null==config.Scope?config.Scope=!1:(config.Mod||ADDED.M||(CCFG.height=CCFG.height+32,ADDED.M=!0),config.Ench||ADDED.E||(CCFG.height=CCFG.height+24,ADDED.E=!0),config.OE||ADDED.O||(CCFG.height=CCFG.height+24,ADDED.O=!0),config.AE||ADDED.A||(CCFG.height=CCFG.height+24,ADDED.A=!0),config.Addon||ADDED.AD||(CCFG.height=CCFG.height+24,ADDED.AD=!0),null==config.Scope.Lv&&(config.Scope.Lv=1),null==config.Scope.name&&(config.Scope.name="Any Scope"),CCFG.height=CCFG.height+24);const Field=Canvas.createCanvas(CCFG.width,CCFG.height),ctx=Field.getContext("2d");return Canvas.registerFont("./lib/minecraft_font.ttf",{family:"minecraft"}),ctx.fillStyle=colors.sl,ctx.fillRect(0,0,Field.width,Field.height),ctx.fillStyle=colors.bg,ctx.fillRect(2.5,2.5,Field.width-5,Field.height-5),ctx.fillStyle=config.name.color,ctx.font="bold 16px minecraft",ctx.fillText(`${config.name.value} - <${config.name.bullet}>`,7,23),config.Mod&&(ctx.fillStyle=Scolor.Mod[""+config.Mod.Lv],ctx.font="bold 16px minecraft",ctx.fillText(`Mod:  ${config.Mod.name}`,7,55)),config.Ench&&(ctx.fillStyle=Scolor.Ench[""+config.Ench.Lv],ctx.font="bold 16px minecraft",ctx.fillText(`Ench:  ${config.Ench.name}  ${"I".repeat(+config.Ench.Lv)}`,7,79)),config.OE&&(ctx.fillStyle=Scolor.Ench[""+config.OE.Lv],ctx.font="bold 16px minecraft",ctx.fillText(`Ench:  ${config.OE.name}  ${"I".repeat(+config.OE.Lv)}`,7,103)),config.AE&&(ctx.fillStyle=Scolor.AE[""+config.AE.Lv],ctx.font="bold 16px minecraft",ctx.fillText(`AE:  ${config.AE.name}`,7,127)),config.Addon&&(ctx.fillStyle=Scolor.Addon[""+config.Addon.Lv],ctx.font="bold 16px minecraft",ctx.fillText(`Addon:  ${config.Addon.name}  ${config.Addon.Lv>1?"+".repeat(+config.Addon.Lv-1):""}`,7,151)),config.Scope&&(ctx.fillStyle=Scolor.Scope[""+config.Scope.Lv],ctx.font="bold 16px minecraft",ctx.fillText(`Scope:  ${config.Scope.name}`,7,175)),Field.toBuffer("image/png")};